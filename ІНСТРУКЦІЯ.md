# Інструкція з встановлення та використання сайту кондитерської

## 1. Початкове налаштування

### 1.1. Вимоги до системи
- Python 3.8 або новіше
- Windows 10/11
- Доступ до інтернету
- Браузер (Chrome, Firefox, Edge або інші сучасні браузери)

### 1.2. Встановлення проекту
1. Розпакуйте архів з проєктом у зручне місце на вашому комп'ютері.
2. Відкрийте командний рядок (cmd) або PowerShell.
3. Перейдіть до папки з проєктом, використовуючи команду `cd шлях/до/папки/проекту`, замінивши `шлях/до/папки/проекту` на фактичний шлях до розпакованої папки.

### 1.3. Налаштування віртуального середовища
1. Запустіть файл `setup_env.bat`, двічі клацнувши на ньому мишею.
2. Дочекайтеся завершення встановлення.  У вікні командного рядка має з'явитися повідомлення "Готово!".
3. Скрипт `setup_env.bat` виконає наступні дії:
   - Створить віртуальне середовище Python у папці `venv`.
   - Активує створене віртуальне середовище.
   - Встановитить всі необхідні Python пакети та бібліотеки, перелічені у файлі `requirements.txt`.
   - Оновить менеджер пакетів `pip` до останньої версії.
   - Виведе список встановлених пакетів для перевірки.
   - Запропонує команду для ручної активації віртуального середовища в майбутньому: `call venv\Scripts\activate.bat`.

## 2. Налаштування бази даних

### 2.1. Створення нової бази даних
1. Запустіть файл `reset_db.bat` подвійним кліком.
2. Уважно стежте за інструкціями, що будуть з'являтися у вікні командного рядка. Скрипт виконає наступні дії:
   - Видалить існуючий файл бази даних `db.sqlite3`, якщо він існує.
   - Видалить файли міграцій додатку `shop`, щоб база даних була створена "з нуля".
   - Створить нові міграції на основі моделей даних додатку `shop`.
   - Застосує міграції, створюючи структуру таблиць бази даних.
   - Запустить процес створення суперкористувача Django (адміністратора сайту).
3. Під час створення суперкористувача вам буде запропоновано ввести:
   - **Username (ім'я користувача)**:  Введіть бажане ім'я користувача для адміністратора (наприклад, `admin`).
   - **Email address (адреса електронної пошти)**: Введіть дійсну адресу електронної пошти адміністратора (наприклад, `admin@example.com`). Це поле можна залишити порожнім.
   - **Password (пароль)**: Введіть пароль для адміністратора. Пароль має бути надійним (мінімум 8 символів, комбінація літер, цифр та символів).  Вам потрібно буде ввести пароль двічі для підтвердження.
4. **Запам'ятайте або запишіть введені дані для логіна та пароля суперкористувача.** Вони потрібні для входу в адміністративну панель сайту.

### 2.2. Налаштування електронної пошти для сповіщень

Для того, щоб сайт міг надсилати сповіщення про нові замовлення на пошту адміністратора, необхідно налаштувати параметри електронної пошти. Ці параметри зберігаються у файлі `.env` в кореневій директорії проекту для безпеки.

1.  **Відкрийте або створіть файл `.env`** у головній папці проекту (там, де знаходиться `manage.py`).
2.  **Додайте або змініть наступні рядки** у файлі `.env`, замінивши значення на ваші реальні дані:

    ```env
    # Email Settings
    EMAIL_HOST_USER='your-email@gmail.com'
    EMAIL_HOST_PASSWORD='your-gmail-app-password'
    # Опціонально, якщо хочете явно задати адресу відправника та адміністратора:
    # DEFAULT_FROM_EMAIL='your-email@gmail.com'
    # ADMIN_EMAIL='admin-notifications-email@example.com'
    # Можна також додати, якщо потрібно змінювати стандартні значення:
    # EMAIL_HOST='smtp.gmail.com'
    # EMAIL_PORT=587
    # EMAIL_USE_TLS=True
    ```

    *   `EMAIL_HOST_USER`: Ваша адреса електронної пошти Gmail (або іншого провайдера, якщо налаштування SMTP відповідні).
    *   `EMAIL_HOST_PASSWORD`: **Пароль додатка** для вашого облікового запису Gmail. **Ніколи не використовуйте основний пароль від вашого Google акаунту!**

3.  **Як отримати пароль додатка для Gmail:**
    *   Увійдіть у свій обліковий запис Google.
    *   Перейдіть до розділу "Безпека" ([myaccount.google.com/security](https://myaccount.google.com/security)).
    *   Переконайтеся, що у вас увімкнена **Двохетапна перевірка**. Якщо ні, увімкніть її.
    *   У розділі "Як ви входите в обліковий запис Google" знайдіть та натисніть на **"Паролі додатків"** (App passwords). Можливо, доведеться знову ввести пароль від акаунту.
    *   У випадаючому списку "Виберіть додаток" оберіть "Пошта".
    *   У випадаючому списку "Виберіть пристрій" оберіть "Комп’ютер Windows" (або "Інше (<em>власна назва</em>)" і введіть, наприклад, "Django Confititeria").
    *   Натисніть "Згенерувати".
    *   Скопіюйте 16-значний згенерований пароль. **Збережіть його в безпечному місці, оскільки ви не зможете побачити його знову після закриття цього вікна.**
    *   Вставте цей 16-значний пароль як значення для `EMAIL_HOST_PASSWORD` у вашому файлі `.env`.
    *   Натисніть "Готово" у вікні Google.

4.  **Збережіть файл `.env`**. Django автоматично завантажить ці налаштування при наступному запуску сервера.

**Важливо:** Файл `.env` містить конфіденційну інформацію. Переконайтеся, що він доданий до файлу `.gitignore` вашого проекту, щоб випадково не завантажити його до системи контролю версій (наприклад, на GitHub). Якщо у вас немає файлу `.gitignore`, створіть його і додайте туди принаймні рядок `.env`.

### 3.2. Зупинка сервера розробки
1. Перейдіть до вікна командного рядка, в якому запущено сервер (те, що ви запускали за допомогою `run_server.bat`).
2. Натисніть комбінацію клавіш **`Ctrl+C`** (утримуючи клавішу `Ctrl`, натисніть клавішу `C`).
3. Сервер розробки Django буде зупинено. У вікні командного рядка ви можете побачити повідомлення про завершення роботи сервера.
4. Тепер ви можете закрити вікно командного рядка.

## 4. Робота з адміністративною панеллю

### 4.1. Вхід до адмін-панелі
1. Відкрийте браузер
2. Перейдіть за адресою http://127.0.0.1:8000/admin/
3. На сторінці входу введіть **логін та пароль суперкористувача**, які ви створили під час налаштування бази даних (розділ 2.1), та натисніть кнопку "Увійти".

### 4.2. Управління асортиментом товарів (розділ "Асортимент" -> "Assortment items")
1. **Перегляд:** Розділ "Assortment items" відображає список товарів.
2. **Додавання:** Натисніть "Додати Assortment item" ("Додати товар") та заповніть форму:
   - "Назва виробу (Name)", "Ціна (Price)", "Зображення (Image)" (необов'язково).
   - Натисніть "Зберегти".
3. **Редагування:** Натисніть на назву товару або "Змінити" для редагування та "Зберегти" після змін.
4. **Видалення:** Виберіть товари галочками, у меню "Дії" оберіть "Видалити вибрані" та "Виконати", підтвердіть видалення.

### 4.3. Управління замовленнями (розділ "Замовлення" -> "Orders")
1. **Перегляд:** Розділ "Orders" відображає список замовлень.
2. **Фільтрація та пошук:** Використовуйте "Фільтр" за статусом та поле "Пошук" за ім'ям, телефоном або email замовника.
3. **Деталі та статус:** Натисніть на номер замовлення для перегляду деталей. Змініть "Статус" у формі редагування та натисніть "Зберегти".
4. **Видалення:** Виберіть замовлення галочками, у меню "Дії" оберіть "Видалити вибрані" та "Виконати", підтвердіть видалення.


## 5. Робота з сайтом

### 5.1. Головна сторінка ("Головна")
- Вітає відвідувачів та коротко представляє кондитерську "Sugar Bliss".
- Містить блоки з бестселерами асортименту для швидкого ознайомлення.
- Має навігаційне меню для переходу до інших розділів сайту.

### 5.2. Сторінка "Асортимент" ("Асортимент")
- Демонструє повний перелік кондитерських виробів, доступних для замовлення.
- Кожен товар представлений зображенням, назвою та ціною.
- Містить кнопку "Замовити" для швидкого переходу до форми замовлення обраного товару.

### 5.3. Створення замовлення ("Зробити замовлення")
1. Перейдіть на сторінку "Асортимент" або скористайтеся кнопкою "Замовити" на головній сторінці біля обраного товару, або перейдіть за посиланням "Зробити замовлення" в навігаційному меню.
2. Заповніть форму замовлення:
   - **Товар:** (Поле вже заповнене, якщо ви перейшли до форми зі сторінки товару). Виберіть товар зі списку, якщо потрібно.
   - **Кількість:** Вкажіть бажану кількість виробів.
   - **Дата замовлення та доставки:**  Виберіть бажані дати замовлення та доставки.
   - **Ваше ім'я, Телефон, Email:** Введіть ваші контактні дані для зв'язку.
   - **Коментар:** (Необов'язково) Залиште коментар до замовлення, якщо є особливі побажання.
3. Натисніть кнопку "Відправити замовлення" для оформлення замовлення. Після успішного відправлення ви побачите сторінку підтвердження.

## 6. Обслуговування сайту

### 6.1. Оновлення даних
1. Всі зміни виконуються через адмін-панель
2. Для кондитерів можна оновлювати:
   - Особисту інформацію
   - Прайс-листи
   - Фотографії

### 6.2. Резервне копіювання
1. База даних зберігається у файлі `db.sqlite3`
2. Регулярно копіюйте цей файл
3. Зберігайте копії завантажених фотографій з папки `media`

### 6.3. Вирішення проблем
1. Якщо сайт не запускається:
   - Перевірте, чи запущено сервер
   - Перезапустіть `run_server.bat`
2. Якщо не працює відправка пошти:
   - Перевірте налаштування в `settings.py`
   - Переконайтесь, що вказані правильні дані пошти
3. Якщо потрібно скинути базу даних:
   - Запустіть `reset_db.bat`
   - Створіть нового суперкористувача

## 7. Розширення функціоналу

### 7.1. Додавання нових типів виробів
1. Відкрийте файл `confectioners/models.py`
2. Знайдіть список `PRODUCT_CHOICES`
3. Додайте новий тип виробу
4. Запустіть `reset_db.bat` для оновлення бази даних

### 7.2. Зміна дизайну
1. Стилі сайту знаходяться в `static/css/style.css`
2. HTML-шаблони в папці `confectioners/templates/confectioners/`
3. Після змін в статичних файлах перезапустіть сервер

## 8. Безпека

### 8.1. Захист адмін-панелі
- Регулярно змінюйте пароль адміністратора
- Використовуйте складні паролі
- Не передавайте дані доступу стороннім особам

### 8.2. Захист даних
- Регулярно робіть резервні копії
- Перевіряйте права доступу до файлів
- Оновлюйте Django та інші пакети

## 9. Технічна підтримка

### 9.1. Оновлення системи
1. Зупиніть сервер
2. Запустіть `setup_env.bat` для оновлення пакетів
3. Запустіть `run_server.bat`

### 9.2. Очищення системи
1. Видаліть непотрібні медіа-файли через адмін-панель
2. Регулярно перевіряйте логи помилок
3. Очищайте старі замовлення за необхідності

---

Ця інструкція охоплює основні аспекти роботи з сайтом. За додатковими питаннями звертайтеся до розробника. 